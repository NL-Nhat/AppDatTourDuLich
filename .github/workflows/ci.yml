name: Android CI Build & Test (JDK 11)

on:
  # Cháº¡y CI khi code Ä‘Æ°á»£c Ä‘áº©y lÃªn nhÃ¡nh 'main' (sau khi merge)
  push:
    branches: [ "main" ]
  # Cháº¡y CI khi cÃ³ Pull Request nháº¯m vÃ o 'main' (trÆ°á»›c khi merge)
  pull_request:
    branches: [ "main" ]

jobs:
  android-build:
    # Sá»­ dá»¥ng Runner trÃªn Ubuntu
    runs-on: ubuntu-latest
    
    steps:
      - name: â¬‡ï¸ Checkout Code
        uses: actions/checkout@v4
        
      - name: ğŸ› ï¸ Set up JDK 17
        # Thiáº¿t láº­p phiÃªn báº£n Java 11 theo yÃªu cáº§u trong build.gradle cá»§a báº¡n
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'
      
      # BÆ°á»›c nÃ y quan trá»ng Ä‘á»ƒ Gradle Wrapper cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c trÃªn Linux Runner
      - name: ğŸ” Grant execute permission for gradlew
        run: chmod +x gradlew
        
      - name: ğŸ“¦ Run Unit Tests
        # Cháº¡y cÃ¡c bÃ i kiá»ƒm tra Unit test Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong dá»± Ã¡n
        # Náº¿u bÆ°á»›c nÃ y tháº¥t báº¡i, CI sáº½ dá»«ng vÃ  bÃ¡o lá»—i.
        run: ./gradlew test 
        
      - name: ğŸ—ï¸ Build Debug APK
        # BiÃªn dá»‹ch á»©ng dá»¥ng vÃ  táº¡o tá»‡p APK Debug.
        # Náº¿u biÃªn dá»‹ch tháº¥t báº¡i, CI sáº½ dá»«ng vÃ  bÃ¡o lá»—i.
        run: ./gradlew assembleDebug
